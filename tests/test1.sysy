int ans[50], sum = 0, n;

int row[50], line1[50], line2[100];

void printans()
{
    sum = sum + 1;
}

void f(int step)
{
    int i = 1;
    while (i <= n) {
        if (row[i] != 1 && line1[step + i] == 0 && !line2[n + step - i]) {
            ans[step] = i;
            if (step == n)
                printans();
            row[i] = 1;
            line1[step + i] = 1;
            line2[n + step - i] = 1;
            f(step + 1);
            row[i] = 0;
            line1[step + i] = 0;
            line2[n + step - i] = 0;
        }
        i = i + 1;
    }
}

int main()
{
    int N = 4;
    int arr[4] = {1, 5, 6, 8};
    while (N > 0) {
        n = arr[N];
        f(1);
        N = N - 1;
    }
    return sum;
}
